<div *ngIf="errorMessage; else temtemContent">
  <h1>{{ errorMessage }}</h1>
  <p>Redirecting to Temtem list...</p>
</div>

<ng-template #temtemContent>
  <div *ngIf="temtem; else loading">
    <h1>{{ temtem.name }}</h1>
    <img [src]="temtem.portraitWikiUrl" alt="{{ temtem.name }}">
    <p>Types:</p>
    <div>
      <img *ngIf="temtem.type1icon" [src]="temtem.type1icon" alt="Type Icon 1">
      <img *ngIf="temtem.type2icon" [src]="temtem.type2icon" alt="Type Icon 2">
    </div>
    <p *ngIf="temtem.traits">Traits: {{ temtem.traits.join(', ') }}</p>

    <!-- <p *ngIf="temtem.locations">
      <p *ngFor="let loc of temtem.locations">
        {{loc.location}}->{{loc.island}}
      </p> -->

      <div *ngIf="temtem.locations">
        <div *ngFor="let group of getGroupedLocations()">
          <h3>{{ group.island }}</h3>
          <ul>
            <li *ngFor="let location of group.locations">-> {{ location }}</li>
          </ul>
        </div>
      </div>
      

    <div *ngIf="temtem.evolution?.evolutionTree as evoTree">
      <ul>
        <div *ngFor="let evo of evoTree">
          <li>
            <strong>{{ evo.name }}</strong> -
            @if (evo.level) {
            +{{ evo.level }} levels
            } @else if (evo.level == 0)
            {Base}
            <img [src]="getPortraitUrl(evo.number)" alt="{{ evo.name }}">
          </li>
        </div>
      </ul>
    </div>
    <p *ngIf="!temtem.evolution?.evolutionTree">No EvoTree</p>

    Stats:
    <div *ngFor="let stat of getStats()">
      <span>{{ stat.statName | titlecase }}: {{ stat.statValue }}</span>
    </div>
    TVs:
    <div *ngFor="let tv of getTvs()">
      <span>{{ tv.statValue }}</span>
    </div>
  </div>

  <!-- <h3>Techniques:</h3> -->
  <!-- <div *ngIf="getTechniques().length > 0; else noTechniques">
    <ul>
      <li *ngFor="let technique of getTechniques()">
        <strong>{{ technique.name }}</strong> 
        <br>
        <span>Type: {{ technique.type }}</span> |
        <span>Class: {{ technique.class }}</span> |
        <span>Damage: {{ technique.damage }}</span> |
        <span>Stamina Cost: {{ technique.staminaCost }}</span> |
        <span>Hold: {{ technique.hold }}</span> |
        <span>Priority: {{ technique.priority }}</span> 
        <br>
        <span *ngIf="technique.synergy && technique.synergy !== 'None'">Synergy: {{ technique.synergy }}</span>
        <p>Description: {{ technique.description }}</p>
        <p>Effect: {{ technique.effectText }}</p>
      </li>
    </ul>
  </div> -->
  <!-- <ng-template #noTechniques>
    <p>No techniques available.</p>
  </ng-template> -->
  <!-- <div class="trivia-wrapper" *ngFor="let text of getTrivia()">
    <h3>{{temtem?.trivia}}</h3>
  </div> 

  <div class="tempedia-entry">
    <h3>{{temtem?.gameDescription}}</h3>
  </div> -->
  <div class="matchup-wrapper" *ngIf="temtem?.matchUps">
    <h3>Type Matchups</h3>
    <table>
      <thead>
        <tr>
          <th *ngFor="let type of getAllTypes()" class="type-row">
            <img
              [src]="'//temtem-api.mael.tech/images/icons/types/' + type + '.png'"
              alt="{{ type }}"
              class="type-icon"
            />
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td *ngFor="let type of getAllTypes()" [class]="getClassForMultiplier(getMultiplierForType(type))">
            {{ getMultiplierForType(type) }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  
  
  

  <ng-template #loading>
    <p>Loading...</p>
  </ng-template>